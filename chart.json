{
"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
"width": 400,
"height": 500,
"title": "Number of accident in each location",

"layer": [
      {
      "data": {
            "url": "https://raw.githubusercontent.com/FelixCCN/FIT3179/main/Visualization2/Book2.csv"
          }, 
          "transform": [{
            "aggregate": [{
              "op": "count",
              "field": "TOTAL_PERSONS",
              "as": "Total"
            },
        {
            "op":"sum",
            "field": "FATALITY",
            "as":"Person"
        },
        {
            "op":"sum",
            "field": "INJ_OR_FATAL",
            "as":"inj"
        }],
            "groupby": ["LGA_NAME"]
          },

          {"filter":"datum.Total>100"}],

        "selection": {
        "location_highlight": {
        "type": "multi",
        "fields": ["LGA_NAME"],
        "bind": "legend"
        },
        "death_highlight": {
            "type": "multi",
            "fields": ["Person"],
            "bind": "legend"
            }
          },

       
        "mark" :{"type" : "circle"},
        "encoding": {

        "y":{"field":"Total", 
            "type" : "quantitative", 
            "title":"Number of accidents",
            "axis":{"tickCount":7}},

        "x":{"field":"inj", 
            "type":"quantitative", 
            "title" :"Number of people involved",
            "sort":"y",
            "axis":{"tickCount":5}},

        "size":{"field":"Person",
            "type": "quantitative",
            "title":"Number of death",
            "scale": {
                "type": "threshold",
                "domain": [2, 4, 6, 8, 10],
                "range": [30, 150, 450, 600, 900, 1200]
                }},

        "color":{"field":"LGA_NAME", 
            "type": "nominal", 
            "title":"Location",
            "sort":"y",
            "scale":{"scheme": "yelloworangered"}},

        "opacity": {
            "condition": {"selection": "location_highlight", "value": 0.7},
            "value": 0.1
            },   

        "tooltip":[
            {"field":"LGA_NAME", "type":"nominal","title":"Location"},
            {"field":"Total","type":"quantitative","title":"Number of accidents"},
            {"field":"Person","type": "quantitative", "title":"Number of death"},
            {"field":"inj","type": "quantitative","title":"NUmber of people involved"}
        ]}
        
        
        }
        
        ]
}
